# Tetris on STM32 (Blue Pill + ST7735S)

Репозиторий содержит реализацию игры **«Тетрис»** на микроконтроллере **STM32F103C8T6 (Blue Pill)**  
с использованием **TFT-дисплея 1.8" на контроллере ST7735S** и кнопочного управления.

Проект выполнен в рамках курсовой работы по дисциплине  
**«Микропроцессорные системы»**.

---

## Описание проекта

Игра реализована без использования сторонних графических библиотек.  
Взаимодействие с дисплеем осуществляется через программную реализацию SPI (bit-banging).  
Графика строится на основе низкоуровневых примитивов: пиксель, прямоугольник и заливка области.

Реализована полноценная игровая логика:
- падение тетромино с регулируемой скоростью;
- поворот фигур;
- горизонтальное перемещение;
- удаление полностью заполненных строк;
- подсчёт очков и уровней;
- обработка коротких и длительных нажатий кнопок;
- состояние Game Over.

---

## Аппаратная часть

Используемые компоненты:
- STM32F103C8T6 (Blue Pill)
- TFT-дисплей 1.8" ST7735S (128×160)
- 4 тактовые кнопки
- Макетная плата и соединительные провода

### Подключение дисплея (SPI)

| Blue Pill | TFT ST7735S |
|----------|-------------|
| PA5      | SCK / SCL   |
| PA7      | MOSI / SDA  |
| PA4      | CS          |
| PA3      | DC (A0 / RS)|
| PA2      | RST         |
| PB1      | LED / BL    |
| 3.3V     | VCC         |
| GND      | GND         |

### Кнопки управления

| Пин  | Назначение |
|-----|------------|
| PA8  | Перемещение влево |
| PA9  | Ускорение падения |
| PA10 | Перемещение вправо |
| PA11 | Поворот (короткое нажатие) / Reset (удержание 5 сек) |

Все кнопки подключены с использованием режима `INPUT_PULLUP`.

---

## Программная часть

Проект написан с использованием **Arduino Core for STM32**.

Ключевые особенности реализации:
- программный SPI (`spiWrite`, `cmd`, `dat`);
- адресное окно дисплея (`setAW`);
- хранение игрового поля в двумерном массиве;
- поворот фигур в матрице 4×4;
- оптимизированная перерисовка поля полосами;
- обработка удержания кнопок по времени (`millis()`).

---

## Схема подключения

<img width="815" height="489" alt="image" src="https://github.com/user-attachments/assets/073466ea-9c9f-4cca-96af-d13a56d7c05b" />

#Результат работы

<img width="699" height="501" alt="image" src="https://github.com/user-attachments/assets/a79c8919-7d72-4b17-8a06-f1e97c0ba421" />
<img width="704" height="521" alt="image" src="https://github.com/user-attachments/assets/7f5e25cd-af37-45cb-be26-94f2995bf1fe" />
<img width="707" height="500" alt="image" src="https://github.com/user-attachments/assets/1c92b5f5-6647-4230-b5e2-c4ecd69d8d28" />

#Автор
Дмитрий Филатов, 2025
